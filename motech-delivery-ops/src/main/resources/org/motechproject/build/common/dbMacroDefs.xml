<?xml version="1.0" encoding="UTF-8"?>
<antlib xmlns:flyway="antlib:com.googlecode.flyway.ant">
    <macrodef name="migrate.using.flyway">
        <attribute name="schemas"/>
        <attribute name="migrationDir"/>
        <attribute name="dbDriver"/>
        <attribute name="dbJdbcUrl"/>
        <attribute name="user"/>
        <attribute name="password"/>
        <sequential>
            <property name="flyway.schemas" value="@{schemas}" />
            <property name="flyway.baseDir" value="@{migrationDir}"/>
            <property name="flyway.driver" value="@{dbDriver}"/>
            <property name="flyway.url" value="@{dbJdbcUrl}"/>
            <property name="flyway.user" value="@{user}"/>
            <property name="flyway.password" value="@{password}"/>

            <flyway:migrate />
        </sequential>
    </macrodef>

    <macrodef name="cleanup.database.using.flyway">
        <attribute name="dbDriver"/>
        <attribute name="dbJdbcUrl"/>
        <attribute name="user"/>
        <attribute name="password"/>
        <attribute name="schemas"/>
        <sequential>
            <property name="flyway.schemas" value="@{schemas}" />
            <property name="flyway.driver" value="@{dbDriver}"/>
            <property name="flyway.url" value="@{dbJdbcUrl}"/>
            <property name="flyway.user" value="@{user}"/>
            <property name="flyway.password" value="@{password}"/>
            <flyway:clean/>
        </sequential>
    </macrodef>


</antlib>
